!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.simplifr=t.simplifr||{})}(this,function(t){"use strict";function e(){return{dilimiter:"."}}function i(t,i,r,n){function o(t,e){if(n[e]={type:"object",childs:[]},l(t)){n[e].type="array";for(var r=-1,c=t.length;++r<c;)n[e].childs.push(r),o(t[r],e+i+r)}else if(f(t))for(var u in t)t.hasOwnProperty(u)&&(n[e].childs.push(u),o(t[u],e+i+u));else n[e]=t;return n}return n=n||{},r=r||"root",i=i||e().dilimiter,o(t,r),n}function r(t,r,n,o){o=o||e().dilimiter;var c=t[r];if("array"===c.type){var f=Math.max.apply(null,c.childs);l(n)||(n=[n]),n.forEach(function(e){c.childs.push(++f),i(e,o,r+o+f,t)})}else if("object"===c.type){var u=Object.keys(n);u.forEach(function(e){c.childs.push(e),i(n[e],o,r+o+e,t)})}return t}function n(t,i,r){r=r||e().dilimiter;var n=i.split(r),o=n.pop(),l=n.length?t[n.join(r)]:t;"array"===l.type&&(o=+o);var f=l.childs.indexOf(o);return f>-1&&l.childs.splice(f,1),c(t,i,r),t}function o(t,i,r){return r=r||e().dilimiter,c(t,i,r),t[i]=null,t}function c(t,i,r){r=r||e().dilimiter;var n=t[i];return"array"!==n.type&&"object"!==n.type||n.childs.forEach(function(e){c(t,i+r+e)}),delete t[i],t}function l(t){return"[object Array]"===Object.prototype.toString.call(t)}function f(t){return"[object Object]"===Object.prototype.toString.call(t)}t.simplify=i,t.add=r,t.remove=n,t.reset=o});