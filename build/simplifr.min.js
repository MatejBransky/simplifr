!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.simplifr=t.simplifr||{})}(this,function(t){"use strict";function e(){return{dilimiter:"."}}function i(t,i,r,n){function o(t,e){if(n[e]={type:"object",childs:[]},c(t)){n[e].type="array";for(var r=-1,l=t.length;++r<l;)n[e].childs.push(r),o(t[r],e+i+r)}else if(f(t))for(var p in t)t.hasOwnProperty(p)&&(n[e].childs.push(p),o(t[p],e+i+p));else n[e]=t;return n}return n=n||{},r=r||"root",i=i||e().dilimiter,o(t,r),n}function r(t,r,n,o){o=o||e().dilimiter;var f=t[r];if("array"===f.type){var l=Math.max.apply(null,f.childs);c(n)||(n=[n]),n.forEach(function(e){f.childs.push(++l),i(e,o,r+o+l,t)})}else if("object"===f.type){var p=Object.keys(n);p.forEach(function(e){f.childs.push(e),i(n[e],o,r+o+e,t)})}return t}function n(t,i,r){r=r||e().dilimiter;var n=i.split(r),c=n.pop(),f=n.length?t[n.join(r)]:t;"array"===f.type&&(c=+c);var l=f.childs.indexOf(c);return l>-1&&f.childs.splice(l,1),o(t,i,r),t}function o(t,i,r){r=r||e().dilimiter;var n=t[i];return"array"!==n.type&&"object"!==n.type||n.childs.forEach(function(e){o(t,i+r+e)}),delete t[i],t}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function f(t){return"[object Object]"===Object.prototype.toString.call(t)}t.simplify=i,t.add=r,t.remove=n});