!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.simplifr=t.simplifr||{})}(this,function(t){"use strict";function i(){return{root:"root",dilimiter:"."}}function r(t,r,e){return r=r||i().dilimiter,e=e||i().root,f({},e,t,r)}function e(t,r,e,n){n=n||i().dilimiter;var o=t[r];if("array"===o.type){var u=Math.max.apply(null,o.childs);v(e)||(e=[e]),e.forEach(function(i){o.childs.push(++u),f(t,r+n+u,i,n)})}else if("object"===o.type){var c=Object.keys(e);c.forEach(function(i){o.childs.push(i),f(t,r+n+i,e[i],n)})}return t}function n(t,i,r,e){return u(t,i,e),f(t,i,r,e),t}function o(t,r,e){e=e||i().dilimiter;var n=r.split(e),o=n.pop(),u=n.length?t[n.join(e)]:t;"array"===u.type&&(o=+o);var c=u.childs.indexOf(o);return c>-1&&u.childs.splice(c,1),s(t,r,e),t}function u(t,r,e){return e=e||i().dilimiter,s(t,r,e),t[r]=null,t}function c(t,r,e){function n(i){var r,o=t[i];return"array"===o.type?(r=[],o.childs.forEach(function(t){r.push(n(i+e+t))})):"object"===o.type?(r={},o.childs.forEach(function(t){r[t]=n(i+e+t)})):r=o,r}return e=e||i().dilimiter,r=r||i().root,n(r)}function l(t,r,e){e=e||i().dilimiter;for(var n,o,u,c=r.split(e),l=c.shift(),f=[l];u=c.shift();)o=t[l],"array"===o.type?(n=o.childs.indexOf(+u),f.push(n)):f.push(u),l+=e+u;return f.join(e)}function f(t,r,e,n){function o(i,r){if(t[r]={type:"object",childs:[]},v(i)){t[r].type="array";for(var e=-1,u=i.length;++e<u;)t[r].childs.push(e),o(i[e],r+n+e)}else if(j(i))for(var c in i)i.hasOwnProperty(c)&&(t[r].childs.push(c),o(i[c],r+n+c));else t[r]=i;return t}return n=n||i().dilimiter,o(e,r),t}function s(t,r,e){e=e||i().dilimiter;var n=t[r];return"array"!==n.type&&"object"!==n.type||n.childs.forEach(function(i){s(t,r+e+i)}),delete t[r],t}function a(t,r,e){e=e||i().dilimiter;var n=r.split(e).slice(1);return m(t,n,function(t,i){return i?t[i]:t})}function p(t,r,e,n){n=n||i().dilimiter;var o=r.split(n).slice(1);return m(t,o,function(t,i){var r=t[i];if(v(r))v(e)||(e=[e]),r.push.apply(r,e);else if(j(e))for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}),t}function d(t,r,e){e=e||i().dilimiter;var n=r.split(e).slice(1);return m(t,n,function(t,i){return t[i]=null}),t}function h(t,r,e){e=e||i().dilimiter;var n=r.split(e).slice(1);return m(t,n,function(t,i){return v(t)?(t.splice(+i,1),t):delete t[i]}),t}function y(t,r,e,n){n=n||i().dilimiter;var o=r.split(n).slice(1);return m(t,o,function(t,i){return t[i]=e}),t}function m(t,i,r){return i.length>1?m(t[i.shift()],i,r):r(t,i.shift())}function v(t){return"[object Array]"===Object.prototype.toString.call(t)}function j(t){return"[object Object]"===Object.prototype.toString.call(t)}t.simplify=r,t.add=e,t.update=n,t.remove=o,t.reset=u,t.desimplify=c,t.truePath=l,t.getRaw=a,t.addRaw=p,t.resetRaw=d,t.removeRaw=h,t.updateRaw=y});