!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.simplifr=t.simplifr||{})}(this,function(t){"use strict";function i(){return{root:"root",dilimiter:"."}}function r(t,r,e){return r=r||i().dilimiter,e=e||i().root,f({},e,t,r)}function e(t,r,e,n){n=n||i().dilimiter;var o=t[r];if("array"===o.type){var u=Math.max.apply(null,o.childs);m(e)||(e=[e]),e.forEach(function(i){o.childs.push(++u),f(t,r+n+u,i,n)})}else if("object"===o.type){var c=Object.keys(e);c.forEach(function(i){o.childs.push(i),f(t,r+n+i,e[i],n)})}return t}function n(t,i,r,e){return u(t,i,e),f(t,i,r,e),t}function o(t,r,e){e=e||i().dilimiter;var n=r.split(e),o=n.pop(),u=n.length?t[n.join(e)]:t;"array"===u.type&&(o=+o);var c=u.childs.indexOf(o);return c>-1&&u.childs.splice(c,1),l(t,r,e),t}function u(t,r,e){return e=e||i().dilimiter,l(t,r,e),t[r]=null,t}function c(t,r,e){e=e||i().dilimiter;for(var n,o,u,c=r.split(e),f=c.shift(),l=[f];u=c.shift();)o=t[f],"array"===o.type?(n=o.childs.indexOf(+u),l.push(n)):l.push(u),f+=e+u;return l.join(e)}function f(t,r,e,n){function o(i,r){if(t[r]={type:"object",childs:[]},m(i)){t[r].type="array";for(var e=-1,u=i.length;++e<u;)t[r].childs.push(e),o(i[e],r+n+e)}else if(v(i))for(var c in i)i.hasOwnProperty(c)&&(t[r].childs.push(c),o(i[c],r+n+c));else t[r]=i;return t}return n=n||i().dilimiter,o(e,r),t}function l(t,r,e){e=e||i().dilimiter;var n=t[r];return"array"!==n.type&&"object"!==n.type||n.childs.forEach(function(i){l(t,r+e+i)}),delete t[r],t}function a(t,r,e){function n(i){var e,o=t[i];return"array"===o.type?(e=[],o.childs.forEach(function(t){e.push(n(i+r+t))})):"object"===o.type?(e={},o.childs.forEach(function(t){e[t]=n(i+r+t)})):e=o,e}return r=r||i().dilimiter,e=e||i().root,n(e)}function s(t,r,e,n){n=n||i().dilimiter;var o=r.split(n).slice(1);return y(t,o,function(t,i){var r=t[i];if(m(r))m(e)||(e=[e]),r.push.apply(r,e);else if(v(e))for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}),t}function p(t,r,e){e=e||i().dilimiter;var n=r.split(e).slice(1);return y(t,n,function(t,i){return t[i]=null}),t}function d(t,r,e){e=e||i().dilimiter;var n=r.split(e).slice(1);return y(t,n,function(t,i){return m(t)?(t.splice(+i,1),t):delete t[i]}),t}function h(t,r,e,n){n=n||i().dilimiter;var o=r.split(n).slice(1);return y(t,o,function(t,i){return t[i]=e}),t}function y(t,i,r){return i.length>1?y(t[i.shift()],i,r):r(t,i.shift())}function m(t){return"[object Array]"===Object.prototype.toString.call(t)}function v(t){return"[object Object]"===Object.prototype.toString.call(t)}t.simplify=r,t.add=e,t.update=n,t.remove=o,t.reset=u,t.truePath=c,t.extractRaw=a,t.addRaw=s,t.resetRaw=p,t.removeRaw=d,t.updateRaw=h});