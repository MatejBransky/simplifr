!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.simplifr=t.simplifr||{})}(this,function(t){"use strict";function e(){return{dilimiter:"."}}function i(t,i,r,c){function f(t,e){if(c[e]={type:"object",childs:[]},n(t)){c[e].type="array";for(var r=-1,l=t.length;++r<l;)c[e].childs.push(r),f(t[r],e+i+r)}else if(o(t))for(var p in t)t.hasOwnProperty(p)&&(c[e].childs.push(p),f(t[p],e+i+p));else c[e]=t;return c}return c=c||{},r=r||"root",i=i||e().dilimiter,f(t,r),c}function r(t,r,n,o){o=o||e().dilimiter;var c=t[r];if("array"===c.type){var f=Math.max.apply(null,c.childs);c.childs.push(++f),i(n,o,r+o+f,t)}else if("object"===c.type){var l=Object.keys(n);l.forEach(function(e){c.childs.push(e),i(n[e],o,r+o+e,t)})}return t}function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"[object Object]"===Object.prototype.toString.call(t)}t.simplify=i,t.add=r});