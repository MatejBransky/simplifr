!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.simplifr=t.simplifr||{})}(this,function(t){"use strict";function e(){return{root:"root",dilimiter:"."}}function r(t,r,i){return r=r||e().dilimiter,i=i||e().root,l({},i,t,r)}function i(t,r,i,n){n=n||e().dilimiter;var o=t[r];if("undefined"==typeof o||"null"==typeof o)return t;if("array"===o.type){var f=Math.max.apply(null,o.childs);a(i)||(i=[i]),i.forEach(function(e){o.childs.push(++f),l(t,r+n+f,e,n)})}else if("object"===o.type){var c=Object.keys(i);c.forEach(function(e){o.childs.push(e),l(t,r+n+e,i[e],n)})}return t}function n(t,e,r,i){return f(t,e,i),l(t,e,r,i),t}function o(t,r,i){i=i||e().dilimiter;var n=r.split(i),o=n.pop(),f=n.length?t[n.join(i)]:t;"array"===f.type&&(o=+o);var c=f.childs.indexOf(o);return c>-1&&f.childs.splice(c,1),p(t,r,i),t}function f(t,r,i){return i=i||e().dilimiter,p(t,r,i),t[r]=null,t}function c(t,r,i){function n(e){var r,o=t[e];return"undefined"==typeof o||"null"==typeof o?o:("array"===o.type?(r=[],o.childs.forEach(function(t){r.push(n(e+i+t))})):"object"===o.type?(r={},o.childs.forEach(function(t){r[t]=n(e+i+t)})):r=o,r)}return i=i||e().dilimiter,r=r||e().root,n(r)}function u(){if(arguments.length){var t=Array.prototype.filter.call(arguments,function(t){return void 0!=t&&""!=t});return Array.prototype.join.call(t,".")}}function l(t,r,i,n){function o(e,r){if(t[r]={type:"object",childs:[]},a(e)){t[r].type="array";for(var i=-1,f=e.length;++i<f;)t[r].childs.push(i),o(e[i],r+n+i)}else if(d(e))for(var c in e)e.hasOwnProperty(c)&&(t[r].childs.push(c),o(e[c],r+n+c));else t[r]=e;return t}return n=n||e().dilimiter,o(i,r),t}function p(t,r,i){i=i||e().dilimiter;var n=t[r];return"undefined"==typeof n||"null"==typeof n?t:("array"!==n.type&&"object"!==n.type||n.childs.forEach(function(e){p(t,r+i+e)}),delete t[r],t)}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t){return"[object Object]"===Object.prototype.toString.call(t)}t.simplify=r,t.add=i,t.update=n,t.remove=o,t.reset=f,t.desimplify=c,t.join=u});