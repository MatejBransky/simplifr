!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.simplifr=t.simplifr||{})}(this,function(t){"use strict";function e(){return{dilimiter:"."}}function i(t,i,r,n){function o(t,e){if(n[e]={type:"object",childs:[]},d(t)){n[e].type="array";for(var r=-1,u=t.length;++r<u;)n[e].childs.push(r),o(t[r],e+i+r)}else if(h(t))for(var c in t)t.hasOwnProperty(c)&&(n[e].childs.push(c),o(t[c],e+i+c));else n[e]=t;return n}return n=n||{},r=r||"root",i=i||e().dilimiter,o(t,r),n}function r(t,r,n,o){o=o||e().dilimiter;var u=t[r];if("array"===u.type){var c=Math.max.apply(null,u.childs);d(n)||(n=[n]),n.forEach(function(e){u.childs.push(++c),i(e,o,r+o+c,t)})}else if("object"===u.type){var l=Object.keys(n);l.forEach(function(e){u.childs.push(e),i(n[e],o,r+o+e,t)})}return t}function n(t,e,r,n){return u(t,e,n),i(r,n,e,t),t}function o(t,i,r){r=r||e().dilimiter;var n=i.split(r),o=n.pop(),u=n.length?t[n.join(r)]:t;"array"===u.type&&(o=+o);var l=u.childs.indexOf(o);return l>-1&&u.childs.splice(l,1),c(t,i,r),t}function u(t,i,r){return r=r||e().dilimiter,c(t,i,r),t[i]=null,t}function c(t,i,r){r=r||e().dilimiter;var n=t[i];return"array"!==n.type&&"object"!==n.type||n.childs.forEach(function(e){c(t,i+r+e)}),delete t[i],t}function l(t,i,r,n){n=n||e().dilimiter;var o=i.split(n).slice(1);return p(t,o,function(t,e){var i=t[e];if(d(i))d(r)||(r=[r]),i.push.apply(i,r);else if(h(r))for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i}),t}function f(t,i,r){r=r||e().dilimiter;var n=i.split(r).slice(1);return p(t,n,function(t,e){return t[e]=null}),t}function s(t,i,r){r=r||e().dilimiter;var n=i.split(r).slice(1);return p(t,n,function(t,e){return d(t)?(t.splice(+e,1),t):delete t[e]}),t}function a(t,i,r,n){n=n||e().dilimiter;var o=i.split(n).slice(1);return p(t,o,function(t,e){return t[e]=r}),t}function p(t,e,i){return e.length>1?p(t[e.shift()],e,i):i(t,e.shift())}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t){return"[object Object]"===Object.prototype.toString.call(t)}t.simplify=i,t.add=r,t.update=n,t.remove=o,t.reset=u,t.addRaw=l,t.resetRaw=f,t.removeRaw=s,t.updateRaw=a});