!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.simplifr=t.simplifr||{})}(this,function(t){"use strict";function e(){return{dilimiter:"."}}function i(t,i,r,n){function o(t,e){if(n[e]={type:"object",childs:[]},p(t)){n[e].type="array";for(var r=-1,c=t.length;++r<c;)n[e].childs.push(r),o(t[r],e+i+r)}else if(d(t))for(var l in t)t.hasOwnProperty(l)&&(n[e].childs.push(l),o(t[l],e+i+l));else n[e]=t;return n}return n=n||{},r=r||"root",i=i||e().dilimiter,o(t,r),n}function r(t,r,n,o){o=o||e().dilimiter;var c=t[r];if("array"===c.type){var l=Math.max.apply(null,c.childs);p(n)||(n=[n]),n.forEach(function(e){c.childs.push(++l),i(e,o,r+o+l,t)})}else if("object"===c.type){var u=Object.keys(n);u.forEach(function(e){c.childs.push(e),i(n[e],o,r+o+e,t)})}return t}function n(t,e,r,n){return c(t,e,n),i(r,n,e,t),t}function o(t,i,r){r=r||e().dilimiter;var n=i.split(r),o=n.pop(),c=n.length?t[n.join(r)]:t;"array"===c.type&&(o=+o);var u=c.childs.indexOf(o);return u>-1&&c.childs.splice(u,1),l(t,i,r),t}function c(t,i,r){return r=r||e().dilimiter,l(t,i,r),t[i]=null,t}function l(t,i,r){r=r||e().dilimiter;var n=t[i];return"array"!==n.type&&"object"!==n.type||n.childs.forEach(function(e){l(t,i+r+e)}),delete t[i],t}function u(t,i,r,n){n=n||e().dilimiter;var o=i.split(n).slice(1);return a(t,o,function(t,e){var i=t[e];if(p(i))p(r)||(r=[r]),i.push.apply(i,r);else if(d(r))for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i}),t}function f(t,i,r){r=r||e().dilimiter;var n=i.split(r).slice(1);return a(t,n,function(t,e){return t[e]=null}),t}function s(t,i,r){r=r||e().dilimiter;var n=i.split(r).slice(1);return a(t,n,function(t,e){return p(t)?(t.splice(+e,1),t):delete t[e]}),t}function a(t,e,i){return e.length>1?a(t[e.shift()],e,i):i(t,e.shift())}function p(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t){return"[object Object]"===Object.prototype.toString.call(t)}t.simplify=i,t.add=r,t.update=n,t.remove=o,t.reset=c,t.addRaw=u,t.resetRaw=f,t.removeRaw=s});